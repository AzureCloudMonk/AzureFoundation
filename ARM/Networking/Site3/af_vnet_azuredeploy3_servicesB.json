{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "baseUrl": {
      "defaultValue": "https://github.com/willstg/AzureFoundation/tree/master/arm/vnet/",
      "type": "string",
      "metadata": {
        "artifactsBaseUrl": "",
        "description": "URL to acquire other templates"
      }
    },

    "templateLink": {
      "type": "string",
      "defaultValue": "site1/af_vnet_azuredeploy1_servicesB..json",
      "metadata": { "description": "The parameter file for the second site's GW." }
    },

    "parametersLink": {
      "type": "string",
      "defaultValue": "site2/af_vnet_azuredeploy1_servicesB.parameters.json",
      "metadata": { "description": "The parameter file for the second site's GW." }
    },
    /*got the metadata spreadsheet's VNET tab and filter on VNET304
    select the columns labled Template and grouped by color*/
    "commentLocation": {
      "type": "string",
      "defaultValue": "using the metadata template to populate the parameters for the deployment template filter on VNET304"
    },
    "locationName": {
      "type": "string",
      "defaultValue": "usgovtexas"
    },
    "resourceGroupName": {
      "type": "string",
      "defaultValue": "rg_vnet_services_tx"
    },
    "vnetName": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "AzureFoundation VNET Name for virtual data center subscription in a specific data center." }
    },
    "vnetAddressPrefix": {
      "type": "string",
      "defaultValue": "10.128.184.0/21",
      "metadata": { "description": "AzureFoundation VNET Address Prefix, the range of addresses for a specific data center." }
    },
    "dnsServers": {
      "type": "array",
      "defaultValue": [],
      "metadata": { "description": "AzureFoundation Domain Controller DNS server" }
    },


    /*got the metadata spreadsheet's Subnet tab and filter on VNET304
    select the columns labled Template and grouped by color*/

    "commentSubnet": {
      "type": "string",
      "defaultValue": "The parameters are sourced from the subnet tab filtered on VNET304",
      "metadata": { "description": "Using the metadata spreadsheet copy the template colunns to populate the deployment template" }
    },
    "subnet600Prefix": {
      "type": "string",
      "defaultValue": "10.128.184.0/24",
      "metadata": { "description": "Used to host highly sensitive data that is also highly accessed." }
    },
    "subnet600Name": {
      "type": "string",
      "defaultValue": "600_Services_Srvcs_slgmag_TX",
      "metadata": { "description": "Used to host highly sensitive data that is also highly accessed." }
    },
    "subnet600NSG": {
      "type": "string",
      "defaultValue": "600_NSG_Services",
      "metadata": { "description": "NSG: Used to host highly sensitive data that is also highly accessed." }
    },
    "subnet625Prefix": {
      "type": "string",
      "defaultValue": "10.128.186.0/25",
      "metadata": { "description": "Loadbalanced Services (internal) systems" }
    },
    "subnet625Name": {
      "type": "string",
      "defaultValue": "625_LB_Services_Srvcs_slgmag_TX",
      "metadata": { "description": "Loadbalanced Services (internal) systems" }
    },
    "subnet625NSG": {
      "type": "string",
      "defaultValue": "625_NSG_LB_Services",
      "metadata": { "description": "NSG: Loadbalanced Services (internal) systems" }
    },
    "subnet680Prefix": {
      "type": "string",
      "defaultValue": "10.128.187.0/28",
      "metadata": { "description": "Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet680Name": {
      "type": "string",
      "defaultValue": "680_CSR_InsideTest_Srvcs_slgmag_TX",
      "metadata": { "description": "Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet680NSG": {
      "type": "string",
      "defaultValue": "680_NSG_CSR_InsideTest",
      "metadata": { "description": "NSG: Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet681Prefix": {
      "type": "string",
      "defaultValue": "10.128.187.16/28",
      "metadata": { "description": "Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet681Name": {
      "type": "string",
      "defaultValue": "681_CSR_OutsideTest_Srvcs_slgmag_TX",
      "metadata": { "description": "Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet681NSG": {
      "type": "string",
      "defaultValue": "681_NSG_CSR_OutsideTest",
      "metadata": { "description": "NSG: Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet682Prefix": {
      "type": "string",
      "defaultValue": "10.128.187.32/28",
      "metadata": { "description": "Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet682Name": {
      "type": "string",
      "defaultValue": "682_FW_IntTest_Srvcs_slgmag_TX",
      "metadata": { "description": "Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet682NSG": {
      "type": "string",
      "defaultValue": "682_NSG_FW_IntTest",
      "metadata": { "description": "NSG: Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet683Prefix": {
      "type": "string",
      "defaultValue": "10.128.187.64/28",
      "metadata": { "description": "Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet683Name": {
      "type": "string",
      "defaultValue": "683_FW_ExtTest_Srvcs_slgmag_TX",
      "metadata": { "description": "Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet683NSG": {
      "type": "string",
      "defaultValue": "683_NSG_FW_ExtTest",
      "metadata": { "description": "NSG: Used to Test the routing to the inside interface of the CSR" }
    },
    "subnet650Prefix": {
      "type": "string",
      "defaultValue": "10.128.188.0/25",
      "metadata": { "description": "Internet EndPoint Machines" }
    },
    "subnet650Name": {
      "type": "string",
      "defaultValue": "650_DMZ_Srvcs_slgmag_TX",
      "metadata": { "description": "Internet EndPoint Machines" }
    },
    "subnet650NSG": {
      "type": "string",
      "defaultValue": "650_NSG_DMZ",
      "metadata": { "description": "NSG: Internet EndPoint Machines" }
    },
    "subnet655Prefix": {
      "type": "string",
      "defaultValue": "10.128.189.0/25",
      "metadata": { "description": "Loadbalanced Services DMZ systems" }
    },
    "subnet655Name": {
      "type": "string",
      "defaultValue": "655_LB_DMZ_Srvcs_slgmag_TX",
      "metadata": { "description": "Loadbalanced Services DMZ systems" }
    },
    "subnet655NSG": {
      "type": "string",
      "defaultValue": "655_NSG_LB_DMZ",
      "metadata": { "description": "NSG: Loadbalanced Services DMZ systems" }
    },
    "subnet660Prefix": {
      "type": "string",
      "defaultValue": "10.128.190.0/26",
      "metadata": { "description": "Tier 0 - Direct Control of enterprise identities in the environment. Tier 0 includes accounts, groups, and other assets that have direct or indirect administrative control of the Active Directory forest, domains, or domain controllers, and all the assets in it. The security sensitivity of all Tier 0 assets is equivalent as they are all effectively in control of each other" }
    },
    "subnet660Name": {
      "type": "string",
      "defaultValue": "660_User_Tier0_Srvcs_slgmag_TX",
      "metadata": { "description": "Tier 0 - Direct Control of enterprise identities in the environment. Tier 0 includes accounts, groups, and other assets that have direct or indirect administrative control of the Active Directory forest, domains, or domain controllers, and all the assets in it. The security sensitivity of all Tier 0 assets is equivalent as they are all effectively in control of each other" }
    },
    "subnet660NSG": {
      "type": "string",
      "defaultValue": "660_NSG_User_Tier0",
      "metadata": { "description": "NSG: Tier 0 - Direct Control of enterprise identities in the environment. Tier 0 includes accounts, groups, and other assets that have direct or indirect administrative control of the Active Directory forest, domains, or domain controllers, and all the assets in it. The security sensitivity of all Tier 0 assets is equivalent as they are all effectively in control of each other" }
    },
    "subnet661Prefix": {
      "type": "string",
      "defaultValue": "10.128.190.64/26",
      "metadata": { "description": "Tier 1 administrator - manage enterprise servers, services, and applications" }
    },
    "subnet661Name": {
      "type": "string",
      "defaultValue": "661_User_Tier1_Srvcs_slgmag_TX",
      "metadata": { "description": "Tier 1 administrator - manage enterprise servers, services, and applications" }
    },
    "subnet661NSG": {
      "type": "string",
      "defaultValue": "661_NSG_User_Tier1",
      "metadata": { "description": "NSG: Tier 1 administrator - manage enterprise servers, services, and applications" }
    },
    "subnet662Prefix": {
      "type": "string",
      "defaultValue": "10.128.190.128/26",
      "metadata": { "description": "Tier 2 - Control of user workstations and devices. Tier 2 administrator accounts have administrative control of a significant amount of business value that is hosted on user workstations and devices" }
    },
    "subnet662Name": {
      "type": "string",
      "defaultValue": "662_User_Tier2_Srvcs_slgmag_TX",
      "metadata": { "description": "Tier 2 - Control of user workstations and devices. Tier 2 administrator accounts have administrative control of a significant amount of business value that is hosted on user workstations and devices" }
    },
    "subnet662NSG": {
      "type": "string",
      "defaultValue": "662_NSG_User_Tier2",
      "metadata": { "description": "NSG: Tier 2 - Control of user workstations and devices. Tier 2 administrator accounts have administrative control of a significant amount of business value that is hosted on user workstations and devices" }
    },
    "subnet700Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.0/28",
      "metadata": { "description": "Subnet for CSR for Inside interface" }
    },
    "subnet700Name": {
      "type": "string",
      "defaultValue": "700_CSR_Out_Srvcs_slgmag_TX",
      "metadata": { "description": "Subnet for CSR for Inside interface" }
    },
    "subnet700NSG": {
      "type": "string",
      "defaultValue": "700_NSG_CSR_Out",
      "metadata": { "description": "NSG: Subnet for CSR for Inside interface" }
    },
    "subnet701Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.16/28",
      "metadata": { "description": "Subnet for CSR for Outside" }
    },
    "subnet701Name": {
      "type": "string",
      "defaultValue": "701_CSR_In_Srvcs_slgmag_TX",
      "metadata": { "description": "Subnet for CSR for Outside" }
    },
    "subnet701NSG": {
      "type": "string",
      "defaultValue": "701_NSG_CSR_In",
      "metadata": { "description": "NSG: Subnet for CSR for Outside" }
    },
    "subnet702Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.32/28",
      "metadata": { "description": "Subnet for the CSR Tunnel" }
    },
    "subnet702Name": {
      "type": "string",
      "defaultValue": "702_CSR_Tunnel_Srvcs_slgmag_TX",
      "metadata": { "description": "Subnet for the CSR Tunnel" }
    },
    "subnet702NSG": {
      "type": "string",
      "defaultValue": "702_NSG_CSR_Tunnel",
      "metadata": { "description": "NSG: Subnet for the CSR Tunnel" }
    },
    "subnet703Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.48/28",
      "metadata": { "description": "Failover subnet" }
    },
    "subnet703Name": {
      "type": "string",
      "defaultValue": "703_CSR_HA_Srvcs_slgmag_TX",
      "metadata": { "description": "Failover subnet" }
    },
    "subnet703NSG": {
      "type": "string",
      "defaultValue": "703_NSG_CSR_HA",
      "metadata": { "description": "NSG: Failover subnet" }
    },
    "subnet710Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.64/28",
      "metadata": { "description": "ASA management interface" }
    },
    "subnet710Name": {
      "type": "string",
      "defaultValue": "710_IntASA_Mgnt_Srvcs_slgmag_TX",
      "metadata": { "description": "ASA management interface" }
    },
    "subnet710NSG": {
      "type": "string",
      "defaultValue": "710_NSG_IntASA_Mgnt",
      "metadata": { "description": "NSG: ASA management interface" }
    },
    "subnet711Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.80/28",
      "metadata": { "description": "ASA Inside Interface" }
    },
    "subnet711Name": {
      "type": "string",
      "defaultValue": "711_IntASA_In_Srvcs_slgmag_TX",
      "metadata": { "description": "ASA Inside Interface" }
    },
    "subnet711NSG": {
      "type": "string",
      "defaultValue": "711_NSG_IntASA_In",
      "metadata": { "description": "NSG: ASA Inside Interface" }
    },
    "subnet712Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.96/28",
      "metadata": { "description": "ASA Outside Interface" }
    },
    "subnet712Name": {
      "type": "string",
      "defaultValue": "712_IntASA_Out_Srvcs_slgmag_TX",
      "metadata": { "description": "ASA Outside Interface" }
    },
    "subnet712NSG": {
      "type": "string",
      "defaultValue": "712_NSG_IntASA_Out",
      "metadata": { "description": "NSG: ASA Outside Interface" }
    },
    "subnet713Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.112/28",
      "metadata": { "description": "ASA DMZ Interface" }
    },
    "subnet713Name": {
      "type": "string",
      "defaultValue": "713_IntASA_DMZ_Srvcs_slgmag_TX",
      "metadata": { "description": "ASA DMZ Interface" }
    },
    "subnet713NSG": {
      "type": "string",
      "defaultValue": "713_NSG_IntASA_DMZ",
      "metadata": { "description": "NSG: ASA DMZ Interface" }
    },
    "subnet725Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.128/28",
      "metadata": { "description": "Internal Loadbalancer virtual appliance" }
    },
    "subnet725Name": {
      "type": "string",
      "defaultValue": "725_IntLB_Srvcs_slgmag_TX",
      "metadata": { "description": "Internal Loadbalancer virtual appliance" }
    },
    "subnet725NSG": {
      "type": "string",
      "defaultValue": "725_NSG_IntLB",
      "metadata": { "description": "NSG: Internal Loadbalancer virtual appliance" }
    },
    "subnet750Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.144/28",
      "metadata": { "description": "ASA Management interface" }
    },
    "subnet750Name": {
      "type": "string",
      "defaultValue": "750_ExtASA_Mgnt_Srvcs_slgmag_TX",
      "metadata": { "description": "ASA Management interface" }
    },
    "subnet750NSG": {
      "type": "string",
      "defaultValue": "750_NSG_ExtASA_Mgnt",
      "metadata": { "description": "NSG: ASA Management interface" }
    },
    "subnet751Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.160/28",
      "metadata": { "description": "ASA Inside Interface" }
    },
    "subnet751Name": {
      "type": "string",
      "defaultValue": "751_ExtASA_In_Srvcs_slgmag_TX",
      "metadata": { "description": "ASA Inside Interface" }
    },
    "subnet751NSG": {
      "type": "string",
      "defaultValue": "751_NSG_ExtASA_In",
      "metadata": { "description": "NSG: ASA Inside Interface" }
    },
    "subnet752Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.176/28",
      "metadata": { "description": "ASA Outside Interface" }
    },
    "subnet752Name": {
      "type": "string",
      "defaultValue": "752_ExtASA_Out_Srvcs_slgmag_TX",
      "metadata": { "description": "ASA Outside Interface" }
    },
    "subnet752NSG": {
      "type": "string",
      "defaultValue": "752_NSG_ExtASA_Out",
      "metadata": { "description": "NSG: ASA Outside Interface" }
    },
    "subnet753Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.192/28",
      "metadata": { "description": "ASA DMZ Interface" }
    },
    "subnet753Name": {
      "type": "string",
      "defaultValue": "753_ExtASA_DMZ_Srvcs_slgmag_TX",
      "metadata": { "description": "ASA DMZ Interface" }
    },
    "subnet753NSG": {
      "type": "string",
      "defaultValue": "753_NSG_ExtASA_DMZ",
      "metadata": { "description": "NSG: ASA DMZ Interface" }
    },
    "subnet775Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.208/28",
      "metadata": { "description": "External Loadbalancer Virtual Network Appliance " }
    },
    "subnet775Name": {
      "type": "string",
      "defaultValue": "775_ExtLB_Srvcs_slgmag_TX",
      "metadata": { "description": "External Loadbalancer Virtual Network Appliance " }
    },
    "subnet775NSG": {
      "type": "string",
      "defaultValue": "775_NSG_ExtLB",
      "metadata": { "description": "NSG: External Loadbalancer Virtual Network Appliance " }
    },
    "subnet799Prefix": {
      "type": "string",
      "defaultValue": "10.128.191.224/27",
      "metadata": { "description": "The Azure gateway network " }
    },
    "subnet799Name": {
      "type": "string",
      "defaultValue": "GatewaySubnet",
      "metadata": { "description": "The Azure gateway network " }
    },


    /*got the metadata spreadsheet's Gateway tab and filter on VNET304
    select the columns labled Template and grouped by color*/
    "commentGateway": {
      "type": "string",
      "defaultValue": "using the Gateway tab of the metadata spreadsheet filetered on VNET304",
      "metadata": { "description": "Copy the columns that begin with template" }
    },
    "GatewayNamegw304": {
      "type": "string",
      "defaultValue": "gw_Services_TX_ExpressRoute",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "VPNTypegw304": {
      "type": "string",
      "defaultValue": "RouteBased",
      "allowedValues": [ "RouteBased", "PolicyBased" ],
      "metadata": { "description": "The type of VPN connection Route or Policy based." }
    },
    "PublicIPNamegw304": {
      "type": "string",
      "defaultValue": "gwpip_Services_TXExpressRoute",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "gatewaySKUgw304": {
      "type": "string",
      "defaultValue": "Standard",
      "allowedValues": [ "Basic", "Standard", "HighPerformance", "VpnGw1", "VpnGw2", "VpnGw3" ],
      "metadata": { "description": "Gateway SKU, the type of gateway Basic, Standard, High Performance" }
    },
    "GatewayTypegw304": {
      "type": "string",
      "defaultValue": "ExpressRoute",
      "metadata": { "description": "The type of gateway that is being created.  This can be either StaticRouting or DynamicRouting." }
    },
    "erCircuitName": {
      "type": "String",
      "defaultValue": "slgmag_Services_ER",
      "metadata": { "description": "The name of the ER Circuit" }
    },
    "erSKUTier": {
      "type": "string",
      "defaultValue": "Standard",
      "allowedValues": [ "Basic", "Standard", "Premium", "VpnGw1", "VpnGw2", "VpnGw3" ],
      "metadata": { "description": "Chosen SKU Tier of ExpressRoute circuit. Choose from Premium or Standard SKU tiers." }
    },
    "erSKUFamily": {
      "type": "string",
      "defaultValue": "MeteredData",
      "allowedValues": [ "MeteredData", "UnlimitedData" ],
      "metadata": { "description": "Chosen SKU family of ExpressRoute circuit. Choose from MeteredData or UnlimitedData SKU families." }
    },
    "erBandwidth": {
      "type": "int",
      "metadata": { "description": "This is the bandwidth in Mbps of the circuit being created. It must exactly match one of the available bandwidth offers List ExpressRoute Service Providers API call." }
    },
    "erSPName": {
      "type": "string",
      "metadata": { "description": "ExpressRoute Service Provider Name" }
    },
    "erPeeringLocation": {
      "type": "string",
      "metadata": { "description": "The ExpressRoute Peering Location." }
    },
    "SubIDgw304": {
      "type": "string",
      "metadata": { "description": "The Subscrition ID" }
    },
    "BGPgw304": {
      "type": "bool",
      "metadata": { "description": "Will the gateway use BGP routing?" }
    },

    "GatewayNamegw3042": {
      "type": "string",
      "defaultValue": "gw_Services_TX_Vpn",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "VPNTypegw3042": {
      "type": "string",
      "defaultValue": "RouteBased",
      "allowedValues": [ "RouteBased", "PolicyBased" ],
      "metadata": { "description": "The type of VPN connection Route or Policy based." }
    },
    "PublicIPNamegw3042": {
      "type": "string",
      "defaultValue": "gwpip_Services_TXVpn",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "gatewaySKUgw3042": {
      "type": "string",
      "defaultValue": "Standard",
      "allowedValues": [ "Basic", "Standard", "HighPerformance", "VpnGw1", "VpnGw2", "VpnGW3" ],
      "metadata": { "description": "Gateway SKU, the type of gateway Basic, Standard, High Performance" }
    },


    "GatewayTypegw3042": {
      "type": "string",
      "defaultValue": "Vpn",
      "metadata": { "description": "The type of gateway that is being created.  This can be either StaticRouting or DynamicRouting." }
    },
    "SubIDgw3042": {
      "type": "string",
      "metadata": { "description": "The Subscrition ID" }
    },
    "BGPgw3042": {
      "type": "bool",
      "metadata": { "description": "Will the gateway use BGP routing?" }
    },
    "bgpASNgw3042": {
      "type": "integer",
      "metadata": { "description": "The BGP speaker's ASN." }
    },
    "bgpNeighborgw3042": {
      "type": "bool",
      "metadata": { "description": "The BGP peering address and BGP identifier of this BGP speaker." }
    },
    "bgpRoutingWeightgw3042": {
      "type": "integer",
      "metadata": { "description": "The weight added to routes learned from this BGP speaker" }
    },




    /*goto the Connections tab and filter on VNET304, slect the 
    columns that are color coded for the Tempate */

    "ConnectionNamecnct303": {
      "type": "string",
      "defaultValue": "IPSec_slgmag_TX_Services_To_W1_Services",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "vnetNamecnct303": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "Azure VNET of the current location" }
    },
    "LocalNamecnct303": {
      "type": "string",
      "defaultValue": "Services_W1",
      "metadata": { "description": "Name for the destination connection between an Azure VNet and another network" }
    },
    "localGWIPcnct303": {
      "type": "string",
      "defaultValue": "52.161.110.58",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "LocalIPPrefixcnct303": {
      "type": "array",
      "defaultValue": [ "10.128.56.0/21" ],
      "metadata": { "description": "An array of Local IP address prefixes that this gateway will route traffic to." }
    },
    "connectionType1cnct303": {
      "type": "string",
      "defaultValue": "IPSec",
      "metadata": { "description": "The type of connection. For connecting to ExpressRoute circuits, the connectionType must be of type ExpressRoute. Other types are IPsec and Vnet2Vnet." }
    },
    "sharedKeycnct303": {
      "type": "string",
      "defaultValue": "mysharedkey",
      "metadata": { "description": "The shared key to negotiate the VPN connection.  KeyVault will hold this secret." }
    },
    "routingWeightcnct303": {
      "type": "int",
      "defaultValue": 10,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "GWNamecnct303": {
      "type": "string",
      "defaultValue": "gw_Services_TX_Vpn",
      "metadata": { "description": "The gateway name that matches the source VNET." }
    },


    /*got the metadata spreadsheet's Connection tab and filter on VNET304
    select the columns labled Template and grouped by color*/
    "commentConnections": {
      "type": "string",
      "defaultValue": "Metadata spreadsheet connection tab's filtered to VNET304 and copy the template columns below.",
      "metadata": { "description": "useing the metadata spreadsheet select the columns on the connection tab of the spreadshet filtered on VNET304" }
    },
    "ConnectionNamecnct304": {
      "type": "string",
      "defaultValue": "IPSec_slgmag_Services_To_Net1_DC1",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "vnetNamecnct304": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "Azure VNET of the current location" }
    },
    "LocalNamecnct304": {
      "type": "string",
      "defaultValue": "Net1_DC1",
      "metadata": { "description": "Name for the destination connection between an Azure VNet and another network" }
    },
    "localGWIPcnct304": {
      "type": "string",
      "defaultValue": "1.1.1.10",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "LocalIPPrefixcnct304": {
      "type": "array",
      "defaultValue": [ "10.0.0.0/10" ],
      "metadata": { "description": "An array of Local IP address prefixes that this gateway will route traffic to." }
    },
    "connectionType1cnct304": {
      "type": "string",
      "defaultValue": "IPSec",
      "metadata": { "description": "The type of connection. For connecting to ExpressRoute circuits, the connectionType must be of type ExpressRoute. Other types are IPsec and Vnet2Vnet." }
    },
    "sharedKeycnct304": {
      "type": "string",
      "defaultValue": "mysharedkey",
      "metadata": { "description": "The shared key to negotiate the VPN connection.  KeyVault will hold this secret." }
    },
    "routingWeightcnct304": {
      "type": "int",
      "defaultValue": 10,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "GWNamecnct304": {
      "type": "string",
      "defaultValue": "gw_Services_TX_Vpn",
      "metadata": { "description": "The gateway name that matches the source VNET." }
    },
    "ConnectionNamecnct305": {
      "type": "string",
      "defaultValue": "Vnet2Vnet_slgmag_TX_Services_To_AZ_Services",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "vnetNamecnct305": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "Azure VNET of the current location" }
    },
    "LocalNamecnct305": {
      "type": "string",
      "defaultValue": "Services_AZ",
      "metadata": { "description": "Name for the destination connection between an Azure VNet and another network" }
    },
    "remoteGWNamecnct305": {
      "type": "string",
      "defaultValue": "gw_Services_AZ_Vpn",
      "metadata": { "description": "Name for the remote VNET for a VNET to VNET connection" }
    },
    "localGWIPcnct305": {
      "type": "string",
      "defaultValue": "1.1.1.9",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "LocalIPPrefixcnct305": {
      "type": "array",
      "defaultValue": [ "10.128.248.0/21" ],
      "metadata": { "description": "An array of Local IP address prefixes that this gateway will route traffic to." }
    },
    "connectionType1cnct305": {
      "type": "string",
      "defaultValue": "Vnet2Vnet",
      "metadata": { "description": "The type of connection. For connecting to ExpressRoute circuits, the connectionType must be of type ExpressRoute. Other types are IPsec and Vnet2Vnet." }
    },
    "sharedKeycnct305": {
      "type": "string",
      "defaultValue": "mysharedkey",
      "metadata": { "description": "The shared key to negotiate the VPN connection.  KeyVault will hold this secret." }
    },
    "routingWeightcnct305": {
      "type": "int",
      "defaultValue": 10,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "rmtSubIDcnct305": {
      "type": "string",
      "defaultValue": "30457dd5-e56b-416b-9228-d48b37fe7caa",
      "metadata": { "description": "The subscription ID of the peer VNET." }
    },
    "rmtRGNamecnct305": {
      "type": "string",
      "defaultValue": "rg_vnet_services_az",
      "metadata": { "description": "The resource group for the remote subscriptions VNET gateway." }
    },
    "rmtConnectionNamecnct305": {
      "type": "string",
      "defaultValue": "Vnet2Vnet_slgmag_AZ_Services_To_TX_Services",
      "metadata": { "description": "The name of the remote connection." }
    },
    "rmtLocationcnct305": {
      "type": "string",
      "defaultValue": "usgovarizona",
      "metadata": { "description": "The name of the remote location." }
    },
    "GWNamecnct305": {
      "type": "string",
      "defaultValue": "gw_Services_TX_Vpn",
      "metadata": { "description": "The gateway name that matches the source VNET." }
    },

    "ConnectionNamecnct306": {
      "type": "string",
      "defaultValue": "Peering_slgmag_Services_To_Prod_TX",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "vnetNamecnct306": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "Azure VNET of the current location" }
    },
    "connectionType1cnct306": {
      "type": "string",
      "defaultValue": "Peering",
      "metadata": { "description": "The type of connection. For connecting to ExpressRoute circuits, the connectionType must be of type ExpressRoute. Other types are IPsec and Vnet2Vnet." }
    },
    "allowVNETAccesscnct306": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "allowFwdAccesscnct306": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "allowGWAccesscnct306": {
      "type": "bool",
      "defaultValue": false,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "useRemoteGatewaycnct306": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "peerVNETNamecnct306": {
      "type": "string",
      "defaultValue": "vnet_prod_tx",
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "rmtSubIDcnct306": {
      "type": "string",
      "defaultValue": "4a0d1d83-f557-4065-8423-be499038298a",
      "metadata": { "description": "The subscription ID of the peer VNET." }
    },
    "rmtRGNamecnct306": {
      "type": "string",
      "defaultValue": "rg_vnet_prod_tx",
      "metadata": { "description": "The resource group for the remote subscription VNET." }
    },
    "rmtConnectionNamecnct306": {
      "type": "string",
      "defaultValue": "",
      "metadata": { "description": "The name of the remote connection." }
    },
    "rmtLocationcnct306": {
      "type": "string",
      "defaultValue": "usgovtexas",
      "metadata": { "description": "The name of the remote location." }
    },
    "ConnectionNamecnct307": {
      "type": "string",
      "defaultValue": "Peering_slgmag_Services_To_HBI_TX",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "vnetNamecnct307": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "Azure VNET of the current location" }
    },
    "connectionType1cnct307": {
      "type": "string",
      "defaultValue": "Peering",
      "metadata": { "description": "The type of connection. For connecting to ExpressRoute circuits, the connectionType must be of type ExpressRoute. Other types are IPsec and Vnet2Vnet." }
    },
    "allowVNETAccesscnct307": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "allowFwdAccesscnct307": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "allowGWAccesscnct307": {
      "type": "bool",
      "defaultValue": false,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "useRemoteGatewaycnct307": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "peerVNETNamecnct307": {
      "type": "string",
      "defaultValue": "vnet_hbi_tx",
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "rmtSubIDcnct307": {
      "type": "string",
      "defaultValue": "97eba262-9086-4a3e-9770-dcfef6c3df30",
      "metadata": { "description": "The subscription ID of the peer VNET." }
    },
    "rmtRGNamecnct307": {
      "type": "string",
      "defaultValue": "rg_vnet_hbi_tx",
      "metadata": { "description": "The resource group for the remote subscription VNET." }
    },
    "rmtConnectionNamecnct307": {
      "type": "string",
      "defaultValue": "",
      "metadata": { "description": "The name of the remote connection." }
    },
    "rmtLocationcnct307": {
      "type": "string",
      "defaultValue": "usgovtexas",
      "metadata": { "description": "The name of the remote location." }
    },
    "ConnectionNamecnct308": {
      "type": "string",
      "defaultValue": "Peering_slgmag_Services_To_PreProd_TX",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "vnetNamecnct308": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "Azure VNET of the current location" }
    },
    "connectionType1cnct308": {
      "type": "string",
      "defaultValue": "Peering",
      "metadata": { "description": "The type of connection. For connecting to ExpressRoute circuits, the connectionType must be of type ExpressRoute. Other types are IPsec and Vnet2Vnet." }
    },
    "allowVNETAccesscnct308": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "allowFwdAccesscnct308": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "allowGWAccesscnct308": {
      "type": "bool",
      "defaultValue": false,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "useRemoteGatewaycnct308": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "peerVNETNamecnct308": {
      "type": "string",
      "defaultValue": "vnet_preprod_tx",
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "rmtSubIDcnct308": {
      "type": "string",
      "defaultValue": "a4b962d2-6b17-4c38-af02-010a6e774379",
      "metadata": { "description": "The subscription ID of the peer VNET." }
    },
    "rmtRGNamecnct308": {
      "type": "string",
      "defaultValue": "rg_vnet_preprod_tx",
      "metadata": { "description": "The resource group for the remote subscription VNET." }
    },
    "rmtConnectionNamecnct308": {
      "type": "string",
      "defaultValue": "",
      "metadata": { "description": "The name of the remote connection." }
    },
    "rmtLocationcnct308": {
      "type": "string",
      "defaultValue": "usgovtexas",
      "metadata": { "description": "The name of the remote location." }
    },
    "ConnectionNamecnct309": {
      "type": "string",
      "defaultValue": "Peering_slgmag_Services_To_Storage_TX",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "vnetNamecnct309": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "Azure VNET of the current location" }
    },
    "connectionType1cnct309": {
      "type": "string",
      "defaultValue": "Peering",
      "metadata": { "description": "The type of connection. For connecting to ExpressRoute circuits, the connectionType must be of type ExpressRoute. Other types are IPsec and Vnet2Vnet." }
    },
    "allowVNETAccesscnct309": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "allowFwdAccesscnct309": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "allowGWAccesscnct309": {
      "type": "bool",
      "defaultValue": false,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "useRemoteGatewaycnct309": {
      "type": "bool",
      "defaultValue": true,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "peerVNETNamecnct309": {
      "type": "string",
      "defaultValue": "vnet_storage_tx",
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "rmtSubIDcnct309": {
      "type": "string",
      "defaultValue": "0223b7af-344f-42cd-bed2-5ebbc7d06d5d",
      "metadata": { "description": "The subscription ID of the peer VNET." }
    },
    "rmtRGNamecnct309": {
      "type": "string",
      "defaultValue": "rg_vnet_storage_tx",
      "metadata": { "description": "The resource group for the remote subscription VNET." }
    },
    "rmtConnectionNamecnct309": {
      "type": "string",
      "defaultValue": "",
      "metadata": { "description": "The name of the remote connection." }
    },
    "rmtLocationcnct309": {
      "type": "string",
      "defaultValue": "usgovtexas",
      "metadata": { "description": "The name of the remote location." }
    },
    /*This is a MAG to MAC connection, not normal*/
    "ConnectionNamecnct303": {
      "type": "string",
      "defaultValue": "IPSec_slgmag_TX_Services_To_W1_Services",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "vnetNamecnct303": {
      "type": "string",
      "defaultValue": "vnet_services_tx",
      "metadata": { "description": "Azure VNET of the current location" }
    },
    "LocalNamecnct303": {
      "type": "string",
      "defaultValue": "Services_W1",
      "metadata": { "description": "Name for the destination connection between an Azure VNet and another network" }
    },
    "localGWIPcnct303": {
      "type": "string",
      "defaultValue": "52.161.110.58",
      "metadata": { "description": "Arbitrary name for the new connection between an Azure VNet and another network" }
    },
    "LocalIPPrefixcnct303": {
      "type": "array",
      "defaultValue": [ "10.128.56.0/21" ],
      "metadata": { "description": "An array of Local IP address prefixes that this gateway will route traffic to." }
    },
    "connectionType1cnct303": {
      "type": "string",
      "defaultValue": "IPSec",
      "metadata": { "description": "The type of connection. For connecting to ExpressRoute circuits, the connectionType must be of type ExpressRoute. Other types are IPsec and Vnet2Vnet." }
    },
    "sharedKeycnct303": {
      "type": "string",
      "defaultValue": "mysharedkey",
      "metadata": { "description": "The shared key to negotiate the VPN connection.  KeyVault will hold this secret." }
    },
    "routingWeightcnct303": {
      "type": "int",
      "defaultValue": 10,
      "metadata": { "description": "The routing weight tells the protocol how expensive it is to route on this gateway." }
    },
    "GWNamecnct303": {
      "type": "string",
      "defaultValue": "gw_Services_TX_Vpn",
      "metadata": { "description": "The gateway name that matches the source VNET." }
    }



  },
  "variables": {
    "apiVersion": "2015-06-15",
    "vnetID": "[resourceId('Microsoft.Network/virtualNetworks', parameters('vnetName'))]",
    "subnet799Ref": "[concat(variables('vnetID'),'/subnets/',parameters('subnet799Name'))]"

  },
  "resources": [
    /*goto the Metadata spreadsheet and the NSGRules Tab, filter on VENT304
    select the Resource columns grouped by color.*/
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet600NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "600_NSG_Services_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet625NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "625_NSG_LB_Services_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet650NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "650_NSG_DMZ_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet655NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "655_NSG_LB_DMZ_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet660NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "660_NSG_User_Tier0_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet661NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "661_NSG_User_Tier1_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet662NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "662_NSG_User_Tier2_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet680NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "680_NSG_CSR_InsideTest_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet681NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "681_NSG_CSR_OutsideTest_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet682NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "682_NSG_FW_IntTest_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet683NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "683_NSG_FW_ExtTest_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },

    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet700NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "700_NSG_CSR_Out_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "SSH.Inbound.Allow",
            "properties": {
              "description": "SSH.Inbound.Allow",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "22",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 100,
              "direction": "Inbound"
            }
          },
          {
            "name": "UDP500.Inbound.Allow",
            "properties": {
              "description": "UDP500.Inbound.Allow",
              "protocol": "UDP",
              "sourcePortRange": "*",
              "destinationPortRange": "500",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 101,
              "direction": "Inbound"
            }
          },
          {
            "name": "UDP4500.Inbound.Allow",
            "properties": {
              "description": "UDP4500.Inbound.Allow",
              "protocol": "UDP",
              "sourcePortRange": "*",
              "destinationPortRange": "4500",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 102,
              "direction": "Inbound"
            }
          },
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet701NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "701_NSG_CSR_In_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet702NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "702_NSG_CSR_Tunnel_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet703NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "703_NSG_CSR_HA_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet710NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "710_NSG_IntASA_Mgnt_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "SSH.Inbound.Allow",
            "properties": {
              "description": "SSH.Inbound.Allow",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "22",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 100,
              "direction": "Inbound"
            }
          },
          {
            "name": "UDP500.Inbound.Allow",
            "properties": {
              "description": "UDP500.Inbound.Allow",
              "protocol": "UDP",
              "sourcePortRange": "*",
              "destinationPortRange": "500",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 101,
              "direction": "Inbound"
            }
          },
          {
            "name": "UDP4500.Inbound.Allow",
            "properties": {
              "description": "UDP4500.Inbound.Allow",
              "protocol": "UDP",
              "sourcePortRange": "*",
              "destinationPortRange": "4500",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 102,
              "direction": "Inbound"
            }
          },
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet711NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "711_NSG_IntASA_In_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet712NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "712_NSG_IntASA_Out_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet713NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "713_NSG_IntASA_DMZ_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet725NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "725_NSG_IntLB_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet750NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "750_NSG_ExtASA_Mgnt_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "SSH.Inbound.Allow",
            "properties": {
              "description": "SSH.Inbound.Allow",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "22",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 100,
              "direction": "Inbound"
            }
          },
          {
            "name": "UDP500.Inbound.Allow",
            "properties": {
              "description": "UDP500.Inbound.Allow",
              "protocol": "UDP",
              "sourcePortRange": "*",
              "destinationPortRange": "500",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 101,
              "direction": "Inbound"
            }
          },
          {
            "name": "UDP4500.Inbound.Allow",
            "properties": {
              "description": "UDP4500.Inbound.Allow",
              "protocol": "UDP",
              "sourcePortRange": "*",
              "destinationPortRange": "4500",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 102,
              "direction": "Inbound"
            }
          },
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet751NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "751_NSG_ExtASA_In_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet752NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "752_NSG_ExtASA_Out_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet753NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "753_NSG_ExtASA_DMZ_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/networkSecurityGroups",
      "name": "[parameters('subnet775NSG')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "775_NSG_ExtLB_TX" },
      "properties": {
        "securityRules": [
          {
            "name": "All_Internet.Inbound.Deny",
            "properties": {
              "description": "All_Internet.Inbound.Deny",
              "protocol": "TCP",
              "sourcePortRange": "*",
              "destinationPortRange": "*",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Deny",
              "priority": 150,
              "direction": "Inbound"
            }
          }
        ]
      }
    },



    /*goto the Metadata spreadsheet and the Subnet Tab, filter on VENT304
    select the Resource columns grouped by color.*/
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/virtualNetworks",
      "name": "[parameters('vnetName')]",
      "location": "[resourceGroup().location]",
      "tags": { "displayName": "AzureFoundation VNet Definition" },
      "properties": {
        "addressSpace": { "addressPrefixes": [ "[parameters('vnetAddressPrefix')]" ] },
        "subnets": [
          {
            "name": "[parameters('subnet600name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet600prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet600NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet625name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet625prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet625NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet680name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet680prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet680NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet681name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet681prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet681NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet682name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet682prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet682NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet683name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet683prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet683NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet650name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet650prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet650NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet655name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet655prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet655NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet660name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet660prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet660NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet661name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet661prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet661NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet662name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet662prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet662NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet700name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet700prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet700NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet701name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet701prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet701NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet702name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet702prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet702NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet703name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet703prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet703NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet710name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet710prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet710NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet711name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet711prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet711NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet712name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet712prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet712NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet713name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet713prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet713NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet725name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet725prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet725NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet750name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet750prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet750NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet751name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet751prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet751NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet752name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet752prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet752NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet753name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet753prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet753NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet775name')]",
            "properties": {
              "addressPrefix": "[parameters('subnet775prefix')]",
              "networkSecurityGroup": { "id": "[resourceID('Microsoft.Network/networkSecurityGroups', parameters('subnet775NSG'))]" }
            }
          },
          {
            "name": "[parameters('subnet799name')]",
            "properties": { "addressPrefix": "[parameters('subnet799prefix')]" }
          }
        ],


        /*STOP Subnet Resources*/


        "resources": [
          /*goto the Metadata spreadsheet and the Connections Tab, filter on VENT304
    select the Resource columns grouped by color. The last column is for Peering*/
          {
            "apiVersion": "2016-06-01",
            "type": "virtualNetworkPeerings",
            "name": "[parameters('ConnectionNamecnct306')]",
            "location": "[resourceGroup().location]",
            /* "dependsOn": [ "[concat('/subscriptions/', parameters('rmtSubIDcnct306'), '/resourceGroups/', parameters('rmtRGNamecnct306'),'/providers/Microsoft.Network/virtualNetworks/',parameters('peerVNETNamecnct306'))]", "[concat('Microsoft.Networks/virtualNetworks/',parameters('vnetNamecnct306'))]" ],*/
            "comments": "Make sure you put these resources within the Resources of a VNET, like a subnet",
            "properties": {
              "allowVirtualNetworkAccess": "[parameters('allowVNETAccesscnct306')]",
              "allowForwardedTraffic": "[parameters('allowFwdAccesscnct306')]",
              "allowGatewayTransit": "[parameters('allowGWAccesscnct306')]",
              "useRemoteGateways": "[parameters('allowVNETAccesscnct306')]",
              "remoteVirtualNetwork": { "id": "[concat('/subscriptions/', parameters('rmtSubIDcnct306'), '/resourceGroups/', parameters('rmtRGNamecnct306'),'/providers/Microsoft.Network/virtualNetworks/',parameters('peerVNETNamecnct306'))]" }
            }
          },
          {
            "apiVersion": "2016-06-01",
            "type": "virtualNetworkPeerings",
            "name": "[parameters('ConnectionNamecnct307')]",
            "location": "[resourceGroup().location]",
            "dependsOn": [ "[concat('/subscriptions/', parameters('rmtSubIDcnct307'), '/resourceGroups/', parameters('rmtRGNamecnct307'),'/providers/Microsoft.Network/virtualNetworks/',parameters('peerVNETNamecnct307'))]", "[concat('Microsoft.Networks/virtualNetworks/',parameters('vnetNamecnct307'))]" ],
            "comments": "Make sure you put these resources within the Resources of a VNET, like a subnet",
            "properties": {
              "allowVirtualNetworkAccess": "[parameters('allowVNETAccesscnct307')]",
              "allowForwardedTraffic": "[parameters('allowFwdAccesscnct307')]",
              "allowGatewayTransit": "[parameters('allowGWAccesscnct307')]",
              "useRemoteGateways": "[parameters('allowVNETAccesscnct307')]",
              "remoteVirtualNetwork": { "id": "[concat('/subscriptions/', parameters('rmtSubIDcnct307'), '/resourceGroups/', parameters('rmtRGNamecnct307'),'/providers/Microsoft.Network/virtualNetworks/',parameters('peerVNETNamecnct307'))]" }
            }
          },
          {
            "apiVersion": "2016-06-01",
            "type": "virtualNetworkPeerings",
            "name": "[parameters('ConnectionNamecnct308')]",
            "location": "[resourceGroup().location]",
            "dependsOn": [ "[concat('/subscriptions/', parameters('rmtSubIDcnct308'), '/resourceGroups/', parameters('rmtRGNamecnct308'),'/providers/Microsoft.Network/virtualNetworks/',parameters('peerVNETNamecnct308'))]", "[concat('Microsoft.Networks/virtualNetworks/',parameters('vnetNamecnct308'))]" ],
            "comments": "Make sure you put these resources within the Resources of a VNET, like a subnet",
            "properties": {
              "allowVirtualNetworkAccess": "[parameters('allowVNETAccesscnct308')]",
              "allowForwardedTraffic": "[parameters('allowFwdAccesscnct308')]",
              "allowGatewayTransit": "[parameters('allowGWAccesscnct308')]",
              "useRemoteGateways": "[parameters('allowVNETAccesscnct308')]",
              "remoteVirtualNetwork": { "id": "[concat('/subscriptions/', parameters('rmtSubIDcnct308'), '/resourceGroups/', parameters('rmtRGNamecnct308'),'/providers/Microsoft.Network/virtualNetworks/',parameters('peerVNETNamecnct308'))]" }
            }
          },
          {
            "apiVersion": "2016-06-01",
            "type": "virtualNetworkPeerings",
            "name": "[parameters('ConnectionNamecnct309')]",
            "location": "[resourceGroup().location]",
            "dependsOn": [ "[concat('/subscriptions/', parameters('rmtSubIDcnct309'), '/resourceGroups/', parameters('rmtRGNamecnct309'),'/providers/Microsoft.Network/virtualNetworks/',parameters('peerVNETNamecnct309'))]", "[concat('Microsoft.Networks/virtualNetworks/',parameters('vnetNamecnct309'))]" ],
            "comments": "Make sure you put these resources within the Resources of a VNET, like a subnet",
            "properties": {
              "allowVirtualNetworkAccess": "[parameters('allowVNETAccesscnct309')]",
              "allowForwardedTraffic": "[parameters('allowFwdAccesscnct309')]",
              "allowGatewayTransit": "[parameters('allowGWAccesscnct309')]",
              "useRemoteGateways": "[parameters('allowVNETAccesscnct309')]",
              "remoteVirtualNetwork": { "id": "[concat('/subscriptions/', parameters('rmtSubIDcnct309'), '/resourceGroups/', parameters('rmtRGNamecnct309'),'/providers/Microsoft.Network/virtualNetworks/',parameters('peerVNETNamecnct309'))]" }
            }
          }
        ],

        "dhcpOptions": { "dnsServers": [ "10.128.59.36" ] },


        "dependsOn": [
          /*goto the Metadata spreadsheet and the Subnet Tab, filter on VENT304
    select the DependsOn columns grouped by color.*/
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet600NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet625NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet680NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet681NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet682NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet683NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet650NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet655NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet660NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet661NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet662NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet700NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet701NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet702NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet703NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet710NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet711NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet712NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet713NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet725NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet750NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet751NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet752NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet753NSG'))]",
          "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('subnet775NSG'))]"
        ]
      }
    },
    /*goto the Metadata spreadsheet and the Gateway Tab, filter on VENT304
    select the DependsOn columns grouped by color.*/

    {
      "apiVersion": "[variables('apiversion')]",
      "type": "Microsoft.Network/publicIPAddresses",
      "name": "[parameters('PublicIPNamegw304')]",
      "location": "[resourceGroup().location]",
      "properties": { "publicIPAllocationMethod": "Dynamic" }
    },
    {
      "apiVersion": "[variables('apiversion')]",
      "type": "Microsoft.Network/virtualNetworkGateways",
      "name": "[parameters('GatewayNamegw304')]",
      "location": "[resourceGroup().location]",
      "dependsOn": [ "[concat('Microsoft.Network/publicIPAddresses/', parameters('PublicIPNamegw304'))]", "[concat('Microsoft.Network/virtualNetworks/', parameters('vnetName'))]" ],
      "properties": {
        "ipConfigurations": [
          {
            "properties": {
              "privateIPAllocationMethod": "Dynamic",
              "subnet": { "id": "[variables('subnet799Ref')]" },
              "publicIPAddress": { "id": "[resourceId('Microsoft.Network/publicIPAddresses',parameters('PublicIPNamegw304'))]" }
            },
            "name": "default"
          }
        ],
        "sku": {
          "name": "[parameters('gatewaySKUgw304')]",
          "tier": "[parameters('gatewaySKUgw304')]"
        },
        "gatewayType": "[parameters('GatewayTypegw304')]"
      }
    },
    {
      "apiVersion": "2015-06-15",
      "type": "Microsoft.Network/expressRouteCircuits",
      "name": "[parameters('erCircuitName')]",
      "location": "[resourceGroup().location]",
      "sku": {
        "name": "[concat(parameters('erSKUTier'),'_', parameters('erSKUFamily'))]",
        "tier": "[parameters('erSKUTier')]",
        "family": "[parameters('erSKUFamily')]"
      },
      "properties": {
        "serviceProviderProperties": {
          "serviceProviderName": "[parameters('erSPName')]",
          "peeringLocation": "[parameters('erPeeringLocation')]",
          "bandwidthInMbps": "[parameters('erBandwidth')]"
        }
      }
    },
    {
      "apiVersion": "[variables('apiversion')]",
      "type": "Microsoft.Network/publicIPAddresses",
      "name": "[parameters('PublicIPNamegw3042')]",
      "location": "[resourceGroup().location]",
      "properties": { "publicIPAllocationMethod": "Dynamic" }
    },
    {
      "apiVersion": "[variables('apiversion')]",
      "type": "Microsoft.Network/virtualNetworkGateways",
      "name": "[parameters('GatewayNamegw3042')]",
      "location": "[resourceGroup().location]",
      "dependsOn": [ "[concat('Microsoft.Network/publicIPAddresses/', parameters('PublicIPNamegw3042'))]", "[concat('Microsoft.Network/virtualNetworks/', parameters('vnetName'))]", "[concat('Microsoft.Network/virtualNetworkGateways/', parameters('GatewayNamegw304'))]" ],
      "properties": {
        "ipConfigurations": [
          {
            "name": "default",
            "properties": {
              "privateIPAllocationMethod": "Dynamic",
              "subnet": { "id": "[variables('subnet799Ref')]" },
              "publicIPAddress": { "id": "[resourceId('Microsoft.Network/publicIPAddresses',parameters('PublicIPNamegw3042'))]" }
            }
          }
        ],
        "gatewayType": "[parameters('GatewayTypegw3042')]",
        "vpnType": "[parameters('VPNTypegw3042')]",
        "enableBGP": "[parameters('BGPgw3042')]",
        "asn": "[parameters('bgpASNgw3042')]",
        "bgpPeeringAddress": "[parameters('bgpNeighborgw3042')]",
        "peerWeight": "[parameters('bgpRoutingWeightgw3042')]",
        "sku": {
          "name": "[parameters('gatewaySKUgw3042')]",
          "tier": "[parameters('gatewaySKUgw3042')]"
        }
      }
    },



    /*Goto the metadata spreadsheet's connection tab and filter on VNET304
    select the columns that are equal to the resources and grouped by color.*/
    {
      "apiVersion": "[variables('apiversion')]",
      "type": "Microsoft.Network/localNetworkGateways",
      "name": "[parameters('LocalNamecnct304')]",
      "location": "[resourceGroup().location]",
      "properties": {
        "localNetworkAddressSpace": { "addressPrefixes": "[parameters('LocalIPPrefixcnct304')]" },
        "gatewayIpAddress": "[parameters('localGWIPcnct304')]"
      }
    },
    {
      "apiVersion": "[variables('apiversion')]",
      "name": "[parameters('ConnectionNamecnct304')]",
      "type": "Microsoft.Network/connections",
      "location": "[resourceGroup().location]",
      "dependsOn": [ "[concat('Microsoft.Network/virtualNetworkGateways/', parameters('GWNamecnct304'))]", "[concat('Microsoft.Network/localNetworkGateways/', parameters('LocalNamecnct304'))]" ],
      "properties": {
        "virtualNetworkGateway1": { "id": "[resourceId('Microsoft.Network/virtualNetworkGateways', parameters('GWNamecnct304'))]" },
        "localNetworkGateway2": { "id": "[resourceId('Microsoft.Network/localNetworkGateways', parameters('LocalNamecnct304'))]" },
        "sharedKey": "[parameters('sharedKeycnct304')]",
        "connectionType": "[parameters('connectionType1cnct304')]",
        "routingWeight": "[parameters('routingWeightcnct304')]"
      }
    },
    {
      "apiVersion": "[variables('apiversion')]",
      "name": "[parameters('ConnectionNamecnct305')]",
      "type": "Microsoft.Network/connections",
      "location": "[resourceGroup().location]",
      "dependsOn": [ "[concat('Microsoft.Network/virtualNetworkGateways/', parameters('GWNamecnct305'))]" ],
      "properties": {
        "virtualNetworkGateway1": { "id": "[resourceId('Microsoft.Network/virtualNetworkGateways', parameters('GWNamecnct305'))]" },
        "virtualNetworkGateway2": { "id": "[concat('/subscriptions/',parameters('rmtSubIDcnct305'),'/resourceGroups/',parameters('rmtRGNamecnct305'),'/providers/Microsoft.Network/VirtualNetworkGateways/', parameters('remoteGWNamecnct305'))]" },
        "sharedKey": "[parameters('sharedKeycnct305')]",
        "connectionType": "[parameters('connectionType1cnct305')]",
        "routingWeight": "[parameters('routingWeightcnct305')]"
      }
    },
    {
      "apiVersion": "[variables('apiversion')]",
      "name": "[parameters('rmtConnectionNamecnct305')]",
      "type": "Microsoft.Network/connections",
      "location": "[parameters('rmtLocationcnct305')]",
      "dependsOn": [ "[concat('Microsoft.Network/virtualNetworkGateways/', parameters('GWNamecnct305'))]" ],
      "properties": {
        "virtualNetworkGateway1": { "id": "[concat('/subscriptions/',parameters('rmtSubIDcnct305'),'/resourceGroups/',parameters('rmtRGNamecnct305'),'/providers/Microsoft.Network/VirtualNetworkGateways/', parameters('remoteGWNamecnct305'))]" },
        "virtualNetworkGateway2": { "id": "[resourceId('Microsoft.Network/virtualNetworkGateways', parameters('GWNamecnct305'))]" },
        "sharedKey": "[parameters('sharedKeycnct305')]",
        "connectionType": "[parameters('connectionType1cnct305')]",
        "routingWeight": "[parameters('routingWeightcnct305')]"
      }
    },
    {
      "apiVersion": "[variables('apiversion')]",
      "type": "Microsoft.Network/localNetworkGateways",
      "name": "[parameters('LocalNamecnct303')]",
      "location": "[resourceGroup().location]",
      "properties": {
        "localNetworkAddressSpace": { "addressPrefixes": "[parameters('LocalIPPrefixcnct303')]" },
        "gatewayIpAddress": "[parameters('localGWIPcnct303')]"
      }
    },
    {
      "apiVersion": "[variables('apiversion')]",
      "name": "[parameters('ConnectionNamecnct303')]",
      "type": "Microsoft.Network/connections",
      "location": "[resourceGroup().location]",
      "dependsOn": [ "[concat('Microsoft.Network/virtualNetworkGateways/', parameters('GWNamecnct303'))]", "[concat('Microsoft.Network/localNetworkGateways/', parameters('LocalNamecnct303'))]" ],
      "properties": {
        "virtualNetworkGateway1": { "id": "[resourceId('Microsoft.Network/virtualNetworkGateways', parameters('GWNamecnct303'))]" },
        "localNetworkGateway2": { "id": "[resourceId('Microsoft.Network/localNetworkGateways', parameters('LocalNamecnct303'))]" },
        "sharedKey": "[parameters('sharedKeycnct303')]",
        "connectionType": "[parameters('connectionType1cnct303')]",
        "routingWeight": "[parameters('routingWeightcnct303')]"
      }
    }
  ],
  "outputs": {
  }
}
